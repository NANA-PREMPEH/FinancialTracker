{% extends "base.html" %}

{% block title %}Edit Wallet - Financial Tracker{% endblock %}

{% block content %}
<div class="card">
    <h1>Edit Wallet</h1>

    <form method="POST" style="max-width: 30rem;">
        <div class="form-group">
            <label for="name">Wallet Name</label>
            <input type="text" id="name" name="name" value="{{ wallet.name }}" placeholder="e.g., Cash, Bank Account" required>
        </div>

        <div class="form-group">
            <label for="balance">Current Balance</label>
            <input type="number" id="balance" name="balance" step="0.01" min="0" value="{{ wallet.balance }}" placeholder="0.00" required>
        </div>

        <div class="form-group">
            <label for="currency">Currency</label>
            <select id="currency" name="currency">
                <option value="GHS" {% if wallet.currency == 'GHS' %}selected{% endif %}>GHS - Ghana Cedi</option>
                <option value="USD" {% if wallet.currency == 'USD' %}selected{% endif %}>USD - US Dollar</option>
                <option value="EUR" {% if wallet.currency == 'EUR' %}selected{% endif %}>EUR - Euro</option>
                <option value="GBP" {% if wallet.currency == 'GBP' %}selected{% endif %}>GBP - British Pound</option>
            </select>
        </div>

        <div class="form-group">
            <label for="wallet_type">Wallet Type</label>
            <select id="wallet_type" name="wallet_type" onchange="toggleAccountNumber()">
                <option value="cash" {% if wallet.wallet_type == 'cash' %}selected{% endif %}>üíµ Cash</option>
                <option value="bank" {% if wallet.wallet_type == 'bank' %}selected{% endif %}>üè¶ Bank Account</option>
                <option value="mobile_money" {% if wallet.wallet_type == 'mobile_money' %}selected{% endif %}>üì± Mobile Money</option>
                <option value="crypto" {% if wallet.wallet_type == 'crypto' %}selected{% endif %}>‚Çø Crypto Wallet</option>
                <option value="ewallet" {% if wallet.wallet_type == 'ewallet' %}selected{% endif %}>ÔøΩ E-Wallet</option>
            </select>
        </div>

        <div class="form-group" id="account_number_group" style="display: none;">
            <label for="account_number" id="account_number_label">Account Number</label>
            <input type="text" id="account_number" name="account_number" value="{{ wallet.account_number or '' }}" placeholder="Enter account number">
        </div>

        <script>
            function toggleAccountNumber() {
                const walletType = document.getElementById('wallet_type').value;
                const accountGroup = document.getElementById('account_number_group');
                const accountLabel = document.getElementById('account_number_label');
                const accountInput = document.getElementById('account_number');

                if (walletType === 'bank') {
                    accountGroup.style.display = 'block';
                    accountLabel.textContent = 'Bank Account Number';
                    accountInput.placeholder = 'Enter bank account number';
                } else if (walletType === 'mobile_money') {
                    accountGroup.style.display = 'block';
                    accountLabel.textContent = 'Mobile Money Number';
                    accountInput.placeholder = 'Enter mobile money number';
                } else {
                    accountGroup.style.display = 'none';
                }
            }
            
            // Initialize on load
            document.addEventListener('DOMContentLoaded', function() {
                toggleAccountNumber();
            });
        </script>

        <div class="form-group">
            <label for="icon">Icon</label>
            <input type="text" id="icon" name="icon" value="{{ wallet.icon }}" maxlength="2">
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="is_shared" {% if wallet.is_shared %}checked{% endif %}>
                Shared Wallet (for families/couples)
            </label>
        </div>

        <div style="display: flex; gap: 1rem;">
            <button type="submit" style="flex: 1;">Update Wallet</button>
            <a href="{{ url_for('main.wallets') }}" style="flex: 1; text-decoration: none;">
                <button type="button" style="width: 100%; background-color: var(--color-text-muted);">Cancel</button>
            </a>
        </div>
    </form>
</div>
{% endblock %}
